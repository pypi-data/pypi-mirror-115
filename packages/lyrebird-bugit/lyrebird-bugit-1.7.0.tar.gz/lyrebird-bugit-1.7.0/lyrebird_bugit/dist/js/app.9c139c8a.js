(function(t){function e(e){for(var a,s,r=e[0],c=e[1],l=e[2],u=0,h=[];u<r.length;u++)s=r[u],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&h.push(i[s][0]),i[s]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);d&&d(e);while(h.length)h.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],a=!0,s=1;s<n.length;s++){var c=n[s];0!==i[c]&&(a=!1)}a&&(o.splice(e--,1),t=r(r.s=n[0]))}return t}var a={},i={app:0},o=[];function s(t){return r.p+"js/"+({}[t]||t)+"."+{"chunk-0b65ffb6":"b1e90d2b","chunk-12950967":"4794c666","chunk-2d0a3196":"525c060a","chunk-2d0a3577":"08e57b7c","chunk-2d0a40c8":"f1e3a7bf","chunk-2d0a43df":"29246f68","chunk-2d0a4bbf":"37464aac","chunk-2d0aa90c":"7dcadb75","chunk-2d0aab07":"9a68281e","chunk-2d0abc00":"7d503b65","chunk-2d0ae937":"972e1caf","chunk-2d0aeb45":"a7da3444","chunk-2d0af08c":"13b9cb9b","chunk-2d0afa49":"0d8775c1","chunk-2d0b1fd5":"28a415f7","chunk-2d0b21d7":"c86168d7","chunk-2d0b2762":"040008b6","chunk-2d0b6187":"98b8f6c5","chunk-2d0ba136":"1c2c79ef","chunk-2d0bb267":"e21a8941","chunk-2d0bcec1":"04eac3a4","chunk-2d0bdf38":"e296a2c0","chunk-2d0bff92":"aeb10dc4","chunk-2d0c0494":"fc8dc4d1","chunk-2d0c0a09":"d6c45b0a","chunk-2d0c4313":"e8a59f53","chunk-2d0c46d1":"26a18d3e","chunk-2d0c4a95":"8524702c","chunk-2d0c512b":"6432da8e","chunk-2d0c86e3":"3ad7a61f","chunk-2d0c8f4c":"e8ca8a7d","chunk-2d0cf16e":"a58b5444","chunk-2d0d056d":"b352fd49","chunk-2d0d0645":"294ff97f","chunk-2d0d2f22":"002f49f5","chunk-2d0d61fd":"5f2f813d","chunk-2d0d7e63":"3693fe03","chunk-2d0dda4e":"0781d70a","chunk-2d0de971":"0f33a456","chunk-2d0e1b57":"ac0499f6","chunk-2d0e1fbe":"165f4253","chunk-2d0e22d6":"9556614b","chunk-2d0e4fe5":"b3503c26","chunk-2d0e542a":"444e1c4d","chunk-2d0e57ec":"b32f338b","chunk-2d0e5b34":"a1ee9b7c","chunk-2d0e6553":"59054791","chunk-2d0e6c86":"e4bfd896","chunk-2d0ea098":"ac843613","chunk-2d0f0a11":"81a52aab","chunk-2d208ac5":"6742d98f","chunk-2d209408":"344ac544","chunk-2d20f745":"ad4a1523","chunk-2d2138c7":"ef6bd49e","chunk-2d216f3b":"eeb0926e","chunk-2d217e5b":"b529a5b7","chunk-2d21ab79":"c411bd93","chunk-2d21b84a":"59ec76ae","chunk-2d21dcd2":"452c194f","chunk-2d21f327":"0b267cb0","chunk-2d2214b3":"147874bc","chunk-2d221799":"ca7947fb","chunk-2d221814":"9c3abd2b","chunk-2d221a34":"1eda6924","chunk-2d22502a":"9f9e3da4","chunk-2d226775":"c0469318","chunk-2d229411":"dad820fb","chunk-2d2295e9":"9dae738a","chunk-2d22c171":"fb2a7e19","chunk-2d22c2b8":"8b8784b2","chunk-2d22ca58":"a9e85f42","chunk-2d2311f7":"b12123d9","chunk-2d237ee7":"8460143b","chunk-2d238465":"9c277db1","chunk-7532b3ea":"56a021bf","chunk-76fee5a0":"92fb92b7","chunk-e13e4362":"3ca55b13"}[t]+".js"}function r(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.e=function(t){var e=[],n=i[t];if(0!==n)if(n)e.push(n[2]);else{var a=new Promise((function(e,a){n=i[t]=[e,a]}));e.push(n[2]=a);var o,c=document.createElement("script");c.charset="utf-8",c.timeout=120,r.nc&&c.setAttribute("nonce",r.nc),c.src=s(t);var l=new Error;o=function(e){c.onerror=c.onload=null,clearTimeout(u);var n=i[t];if(0!==n){if(n){var a=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src;l.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",l.name="ChunkLoadError",l.type=a,l.request=o,n[1](l)}i[t]=void 0}};var u=setTimeout((function(){o({type:"timeout",target:c})}),12e4);c.onerror=c.onload=o,document.head.appendChild(c)}return Promise.all(e)},r.m=t,r.c=a,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="dist/",r.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var d=l;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";n("64a9")},"0be9":function(t,e,n){},1:function(t,e){},10:function(t,e){},11:function(t,e){},12:function(t,e){},13:function(t,e){},14:function(t,e){},15:function(t,e){},2:function(t,e){},2199:function(t,e,n){},"27a0":function(t,e,n){"use strict";n("eac7")},"28fd":function(t,e,n){"use strict";n("d2c7")},3:function(t,e){},4:function(t,e){},"41ac":function(t,e,n){},"4e6f":function(t,e,n){"use strict";n("50ab")},5:function(t,e){},"50ab":function(t,e,n){},5465:function(t,e,n){"use strict";n("6e42")},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var a=n("2b0e"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("Bugit")],1)},o=[],s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bugit-split"},[n("Split",{model:{value:t.split,callback:function(e){t.split=e},expression:"split"}},[n("div",{attrs:{slot:"left"},slot:"left"},[n("BugTemplateSelector"),n("BugItForm")],1),n("div",{attrs:{slot:"right"},slot:"right"},[n("bugit-devices"),n("bugit-extra")],1)])],1)},r=[],c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Form",{staticClass:"split-left-template-selector",attrs:{"label-width":80}},[n("FormItem",{attrs:{label:"template"}},[n("Select",{attrs:{filterable:"",size:"small",placeholder:"Select template"},model:{value:t.selectedTemplateIndex,callback:function(e){t.selectedTemplateIndex=e},expression:"selectedTemplateIndex"}},t._l(t.templates,(function(e,a){return n("Option",{key:a,attrs:{value:a}},[t._v(t._s(e.name))])})),1)],1)],1)},l=[],u={created:function(){this.$store.dispatch("loadTemplateList")},computed:{templates:function(){return this.$store.state.form.templates},selectedTemplateIndex:{get:function(){return this.$store.state.form.selectedTemplateIndex},set:function(t){this.$store.dispatch("updateSelectedTemplateIndex",t)}}}},d=u,h=(n("adbe"),n("2877")),p=Object(h["a"])(d,c,l,!1,null,"246aa2a7",null),f=p.exports,m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.fields?n("div",[n("Form",{staticClass:"split-left-form",attrs:{"label-width":100}},[t._l(t.fields,(function(e,a){return n(t.getFormComponentByData(a,e),{key:a,tag:"component",attrs:{data:e,index:a}})})),n("AttachmentsList"),t.loadTempalte?n("Spin",{attrs:{fix:""}},[t._v("Loading Tempalte")]):t._e()],2),n("Submit")],1):t._e(),n("AttachmentModal")],1)},v=[],g=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("FormItem",{attrs:{label:t.data.name,required:t.isRequired}},[n("div",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.formItemData,expression:"formItemData"}],staticClass:"ivu-input ivu-input-small",attrs:{type:"text",placeholder:t.placeholder},domProps:{value:t.formItemData},on:{input:function(e){e.target.composing||(t.formItemData=e.target.value)}}})])])},b=[],x=(n("7f7f"),{props:["data","index"],computed:{formItemData:{get:function(){return this.$store.state.form.templateDetail[this.index].value},set:function(t){var e=this.index;this.$store.commit("setFormData",{index:e,value:t})}},placeholder:function(){return this.data?this.data.placeholder?this.data.placeholder:this.data.name:""},isRequired:function(){return Boolean(this.data.required)}}}),y=x,k=Object(h["a"])(y,g,b,!1,null,null,null),w=k.exports,S=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("FormItem",{attrs:{label:t.data.name,required:t.isRequired}},[n("div",[n("Select",{attrs:{size:"small",clearable:!t.data.required,multiple:t.data.multiple,filterable:"",placeholder:t.placeholder},model:{value:t.formItemData,callback:function(e){t.formItemData=e},expression:"formItemData"}},t._l(t.data.options,(function(e,a){return n("Option",{key:a,attrs:{value:e.id}},[t._v(t._s(e.name))])})),1)],1)])},$=[],I={props:["data","index"],computed:{formItemData:{get:function(){return this.$store.state.form.templateDetail[this.index].value},set:function(t){var e=this.index;this.$store.commit("setFormData",{index:e,value:t})}},isRequired:function(){return Boolean(this.data.required)},placeholder:function(){return this.data?this.data.placeholder?this.data.placeholder:this.data.name:""}}},C=I,_=Object(h["a"])(C,S,$,!1,null,null,null),T=_.exports,M=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("FormItem",{attrs:{label:t.data.name,required:t.isRequired}},[n("div",{staticStyle:{background:"#eee",padding:"10px"}},[n("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:20},placeholder:"Enter your description..."},model:{value:t.data.value,callback:function(e){t.$set(t.data,"value",e)},expression:"data.value"}}),t._l(t.data.extraMsg,(function(t,e){return n("div",{key:e,staticStyle:{"padding-top":"10px"}},[n("MovableDescription",{attrs:{data:t,index:e}})],1)}))],2)])},D=[],A=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Row",[n("Col",{attrs:{span:"6"}},[n("Tooltip",{attrs:{content:"Upward this section",placement:"top",delay:500}},[t.index?n("a",[n("Icon",{staticStyle:{"padding-right":"5px"},attrs:{type:"md-arrow-round-up"},on:{click:function(e){return t.sortDesc(t.index)}}})],1):t._e()]),n("strong",{staticStyle:{"padding-right":"5px"}},[t._v(t._s(t.data.channel))]),n("Tooltip",{attrs:{content:"Delete this section",placement:"top",delay:500}},[n("a",[n("Icon",{attrs:{type:"md-trash"},on:{click:function(e){return t.deleteDesc(t.index)}}})],1)])],1),n("Col",{staticStyle:{"text-align":"right"},attrs:{span:"18"}},[t.data.sender?n("Tag",{staticStyle:{"max-width":"100%"},attrs:{color:"green"}},[t._v(t._s(t.data.sender.file))]):t._e()],1)],1),n("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:20}},model:{value:t.data.message,callback:function(e){t.$set(t.data,"message",e)},expression:"data.message"}})],1)},E=[],O={props:["data","index"],methods:{deleteDesc:function(t){this.$parent.$parent.deleteDesc(t)},sortDesc:function(t){this.$parent.$parent.sortDesc(t)}}},j=O,F=Object(h["a"])(j,A,E,!1,null,null,null),L=F.exports,P={props:["data","index"],components:{MovableDescription:L},created:function(){this.$bus.$on("addMessage",this.addDesc)},methods:{addDesc:function(t){this.$store.commit("addExtraMsg",{index:this.index,value:t})},deleteDesc:function(t){this.$store.commit("deleteExtraMsg",{index:t,propsIndex:this.index})},sortDesc:function(t){this.$store.dispatch("setExtraMsgUpward",{index:t,propsIndex:this.index})}},computed:{isRequired:function(){return Boolean(this.data.required)}}},B=P,R=Object(h["a"])(B,M,D,!1,null,null,null),N=R.exports,q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("FormItem",{attrs:{label:"attachments"}},[t.attachments.length?n("div",t._l(t.attachments,(function(t,e){return n("p",{key:e},[n("AttachmentItem",{attrs:{data:t,index:e}})],1)})),0):t._e(),t.snapshots.length?n("div",t._l(t.snapshots,(function(t,e){return n("p",{key:e},[n("SnapshotItem",{attrs:{data:t,index:e}})],1)})),0):t.attachments.length?t._e():n("div",[n("p",{staticStyle:{color:"#c5c8ce"}},[t._v("No attachment")])])])},U=[],V=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("FormItem",[n("Tooltip",{attrs:{content:"Click to preview",placement:"top"}},[n("a",{staticStyle:{"padding-right":"10px",color:"#515a6e"},on:{click:function(e){return t.displayAttach(t.data)}}},[t._v(t._s(t.data.name))])]),n("Tooltip",{attrs:{content:"Delete this attachment",placement:"top"}},[n("a",{on:{click:function(e){return t.deleteAttach(t.data)}}},[t._v("delete")])])],1)},z=[],K={props:["data","index"],methods:{deleteAttach:function(t){this.$store.dispatch("removeAttachment",{id:t.id,index:this.index})},displayAttach:function(t){this.$bus.$emit("displayAttach",t)}}},J=K,Y=Object(h["a"])(J,V,z,!1,null,null,null),X=Y.exports,H=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("FormItem",[n("Tooltip",{attrs:{content:"Click to preview",placement:"top"}},[n("a",{staticStyle:{"padding-right":"10px",color:"#515a6e"},on:{click:function(e){return t.displayAttach(t.data)}}},[t._v(t._s(t.data.name))])]),n("Tooltip",{attrs:{content:"Delete this snapshot",placement:"top"}},[n("a",{on:{click:function(e){return t.deleteAttach(t.data)}}},[t._v("delete")])])],1)},G=[],W={props:["data","index"],methods:{deleteAttach:function(t){this.$store.commit("deleteSnapshot",this.index)},displayAttach:function(t){this.$bus.$emit("displayAttach",t)}}},Z=W,Q=Object(h["a"])(Z,H,G,!1,null,null,null),tt=Q.exports,et={components:{AttachmentItem:X,SnapshotItem:tt},created:function(){this.$io.on("attachments",this.addAttachment),this.$bus.$on("addAttachments",this.addAttachment),this.$bus.$on("addSnapshot",this.addSnapshot),this.$store.dispatch("loadAttachment")},computed:{attachments:function(){return this.$store.state.form.attachmentsList},snapshots:function(){return this.$store.state.form.snapshotList}},methods:{addAttachment:function(){this.$store.dispatch("loadAttachment")},addSnapshot:function(t){this.$store.commit("addSnapshot",t)}}},nt=et,at=Object(h["a"])(nt,q,U,!1,null,null,null),it=at.exports,ot=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Modal",{attrs:{width:"60",styles:{top:"30px"}},model:{value:t.isDisplayFile,callback:function(e){t.isDisplayFile=e},expression:"isDisplayFile"}},[n("div",{staticStyle:{"text-align":"center"},attrs:{slot:"header"},slot:"header"},[n("p",[n("Icon",{attrs:{type:"md-document"}}),n("span",{staticStyle:{"padding-left":"10px"}},[t._v(t._s(t.attachmentName))])],1)]),n("div",[t.isImageFile?n("p",[n("ImageEditor",{attrs:{attachmentId:t.attachmentId,src:"/plugins/bugit/api/attachments/"+this.attachmentId}})],1):t.isSnapshot?n("p",[n("CodeEditor",{staticStyle:{height:"500px"},attrs:{"read-only":"",language:"json"},model:{value:this.attachmentContent,callback:function(e){t.$set(this,"attachmentContent",e)},expression:"this.attachmentContent"}})],1):n("p",[n("FileViewer",{attrs:{attachmentId:t.attachmentId}})],1)]),n("div",{attrs:{slot:"footer"},slot:"footer"},[t.isImageFile?n("p",[n("Button",{attrs:{long:"",type:"success"},on:{click:function(e){return t.saveImage()}}},[t._v("Save")])],1):n("p",[n("Button",{staticStyle:{"background-color":"#dcdee2"},attrs:{long:""},on:{click:function(e){t.isDisplayFile=!1}}},[t._v("Close")])],1)])])},st=[],rt=(n("28a5"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Row",[n("i-col",{attrs:{span:"2"}},[n("ButtonGroup",{attrs:{vertical:""}},[n("Button",{attrs:{type:t.btnType("text")},on:{click:function(e){return t.setMode("text")}}},[n("b",[t._v("T")])]),n("Button",{attrs:{icon:"md-brush",type:t.btnType("brush")},on:{click:function(e){return t.setMode("brush")}}}),n("Button",{class:t.undoButtonClass,attrs:{icon:"md-undo"},on:{click:t.undo}})],1)],1),n("i-col",{staticStyle:{"text-align":"center",padding:"10px"},attrs:{span:"20"}},[n("canvas",{ref:"canvas",style:{cursor:t.canvasStyle},on:{mousedown:t.handleMouseDown,mousemove:t.handleMouseMove,mouseup:t.handleMouseUp}}),n("input",{directives:[{name:"show",rawName:"v-show",value:t.isTextInputShown,expression:"isTextInputShown"},{name:"model",rawName:"v-model",value:t.inputText,expression:"inputText"}],ref:"textInput",staticStyle:{position:"absolute"},style:{left:t.inputLeft,top:t.inputTop},attrs:{width:"120px"},domProps:{value:t.inputText},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addText.apply(null,arguments)},input:function(e){e.target.composing||(t.inputText=e.target.value)}}})])],1)],1)}),ct=[];n("ac4d"),n("8a81"),n("5df3"),n("1c4c"),n("6b54");function lt(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=ut(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var a=0,i=function(){};return{s:i,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,r=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){r=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(r)throw o}}}}function ut(t,e){if(t){if("string"===typeof t)return dt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dt(t,e):void 0}}function dt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var ht={props:["src","attachmentId"],data:function(){return{activatedMode:"brush",history:[],currentPath:null,canvasBounds:null,inputText:"",isTextInputShown:!1,inputLeft:"50%",inputTop:"50%",canvas:null,ctx:null,img:null}},mounted:function(){this.canvas=this.$refs.canvas,this.canvas.addEventListener("resize",(function(){console.log("resize")})),this.ctx=this.canvas.getContext("2d"),this.ctx.imageSmoothingEnabled=!1,this.img=new Image;var t=this.scaleCanvas,e=this.drawBackground;this.img.onload=function(){t(),e()},this.img.src=this.src},watch:{src:function(){this.inputText="",this.isTextInputShown=!1,this.img.src=this.src}},created:function(){this.$bus.$on("saveImage",this.save)},computed:{canvasStyle:function(){return"brush"===this.activatedMode?"crosshair":"text"===this.activatedMode?"text":"pointer"},undoButtonClass:function(){return{disabled:this.history.length<=0}}},methods:{showTextInput:function(t,e){var n=this,a=this.event2position(e);this.inputLeft=e.clientX-this.canvasBounds.left+this.canvas.offsetLeft+"px",this.inputTop=e.clientY-this.canvasBounds.top+"px",this.textX=a.x,this.textY=a.y,this.isTextInputShown=t,this.$nextTick((function(){n.$refs.textInput.focus()}))},btnType:function(t){return t===this.activatedMode?"primary":"default"},setMode:function(t){this.activatedMode=t,"text"!==t&&(this.isTextInputShown=!1)},undo:function(){if(!(this.history.length<=0)){this.clearCanvas(),this.drawBackground(),this.history.pop();var t,e=lt(this.history);try{for(e.s();!(t=e.n()).done;){var n=t.value;if("path"===n.name){this.ctx.beginPath();for(var a=0;a<n.data.length;a++){var i=n.data[a];0===a?this.ctx.moveTo(i.x,i.y):this.ctx.lineTo(i.x,i.y)}this.ctx.strokeStyle="#FF0000",this.ctx.lineWidth=5,this.ctx.stroke(),this.ctx.closePath()}else"text"===n.name&&(this.ctx.font="normal normal 36pt Verdana",this.ctx.fillStyle="#FF0000",this.ctx.fillText(n.data.text,n.data.x,n.data.y))}}catch(o){e.e(o)}finally{e.f()}}},event2position:function(t){return{x:(t.clientX-this.canvasBounds.left)*this.ratio*this.ratio,y:(t.clientY-this.canvasBounds.top)*this.ratio*this.ratio}},scaleCanvas:function(){this.canvas.width=250,this.canvas.height=this.canvas.width*this.img.height/this.img.width;var t=this.getPixelRatio(this.ctx);this.ratio=t,this.canvas.style.width=this.canvas.width+"px",this.canvas.style.height=this.canvas.height+"px",this.canvas.width=this.canvas.width*t,this.canvas.height=this.canvas.height*t,this.ctx.scale(1/t,1/t)},clearCanvas:function(){this.ctx.clearRect(0,0,this.canvas.width*this.ratio,this.canvas.height*this.ratio)},drawBackground:function(){this.ctx.drawImage(this.img,0,0,this.img.width,this.img.height,0,0,this.canvas.width*this.ratio,this.canvas.height*this.ratio),this.canvasBounds=this.canvas.getBoundingClientRect()},handleMouseDown:function(t){if("brush"===this.activatedMode){this.canvasBounds=this.canvas.getBoundingClientRect(),this.ctx.beginPath();var e=this.event2position(t);this.ctx.moveTo(e.x,e.y),this.currentPath={name:"path",data:[e]}}},handleMouseUp:function(t){"brush"===this.activatedMode?(this.ctx.closePath(),this.history.push(this.currentPath),this.currentPath=null):"text"===this.activatedMode&&this.showTextInput(!0,t)},handleMouseMove:function(t){if("brush"===this.activatedMode&&1===t.buttons){var e=this.event2position(t);this.ctx.lineTo(e.x,e.y),this.ctx.strokeStyle="#FF0000",this.ctx.lineWidth=5,this.ctx.stroke(),this.currentPath&&this.currentPath.data.push(e)}},addText:function(){this.ctx.font="normal normal 36pt Verdana",this.ctx.fillStyle="#FF0000",this.ctx.fillText(this.inputText,this.textX,this.textY),this.history.push({name:"text",data:{text:this.inputText,x:this.textX,y:this.textY}}),this.isTextInputShown=!1,this.inputText=""},save:function(){this.$store.dispatch("saveEditedImage",{id:this.attachmentId,imageData:this.canvas.toDataURL("image/png")})},getPixelRatio:function(t){var e=t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/e}}},pt=ht,ft=(n("d359"),Object(h["a"])(pt,rt,ct,!1,null,null,null)),mt=ft.exports,vt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("pre",{staticStyle:{"overflow-x":"auto"}},[t._v(t._s(t.shownFileContent))])])},gt=[],bt={props:["attachmentId"],data:function(){return{shownFileContent:null}}},xt=bt,yt=Object(h["a"])(xt,vt,gt,!1,null,null,null),kt=yt.exports,wt=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},St=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticStyle:{width:"100%",height:"100%",border:"1px solid grey"},attrs:{id:"code-editor"}})])}],$t=n("c2c6");n("a481"),n("4917");function It(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Ct(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var a=0,i=function(){};return{s:i,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,r=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){r=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(r)throw o}}}}function Ct(t,e){if(t){if("string"===typeof t)return _t(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_t(t,e):void 0}}function _t(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var Tt={Object:Object,Array:Array};function Mt(t,e){var n=0,a=[],i=!1;while(n<e){var o=n;switch(t[n]){case'"':var s=Et(t,n),r=s.text,c=s.pos;if(a.length){var l=a[a.length-1];l.colType===Tt.Object&&i&&(l.key=r,i=!1)}n=c;break;case"{":a.push({colType:Tt.Object}),i=!0;break;case"[":a.push({colType:Tt.Array,index:0});break;case"}":case"]":a.pop();break;case",":if(a.length){var u=a[a.length-1];u.colType===Tt.Object?i=!0:u.index++}break}n===o&&n++}return Dt(a)}function Dt(t){var e="$";try{var n,a=It(t);try{for(a.s();!(n=a.n()).done;){var i=n.value;if(i.colType===Tt.Object)if(i.key.match(/^[a-zA-Z$_][a-zA-Z\d$_]*$/))e.length&&(e+="."),e+=i.key;else{i.key.replace('"','\\"');e+='["'.concat(i.key,'"]')}else e+="[".concat(i.index,"]")}}catch(o){a.e(o)}finally{a.f()}return e}catch(s){return""}}function At(t){return t%2===0}function Et(t,e){var n=e+1;n=Ot(t,n);var a={text:t.substring(e+1,n),pos:n+1};return a}function Ot(t,e){while(e<t.length){if('"'===t[e]){var n=e;while(n>=0&&"\\"===t[n])n--;if(At(e-n))break}e++}return e}var jt={name:"codeEditor",model:{prop:"content",event:"change"},props:{content:null,language:{default:"javascript"},readOnly:{type:Boolean,default:!1}},data:function(){return{editor:null,jsonPath:null}},watch:{content:function(t){this.editor&&t!==this.editor.getValue()&&($t["editor"].setModelLanguage(this.editor.getModel(),this.language),this.editor.setValue(t),this.editor.trigger(this.editor.getValue(),"editor.action.formatDocument"))}},mounted:function(){var t=this,e=this.copyToClipboard;this.editor=$t["editor"].create(this.$el.querySelector("#code-editor"),{value:this.content,language:this.language,theme:"vs",readOnly:this.readOnly}),this.editor.addAction({id:"json-path",label:"Copy JsonPath",keybindings:[$t["KeyMod"].chord($t["KeyMod"].CtrlCmd|$t["KeyCode"].KEY_J)],precondition:"editorLangId == 'json'",keybindingContext:"editorLangId == 'json'",contextMenuGroupId:"9_cutcopypaste",contextMenuOrder:2,run:e}),this.editor.onDidChangeModelContent((function(e){var n=t.editor.getValue();t.value!==n&&t.$emit("change",n,e)})),this.editor.onDidChangeCursorPosition((function(e){var n=t.editor.getValue(),a=t.editor.getModel().getOffsetAt(e.position),i=t.language;t.value!==n&&"json"===i&&t.$emit("on-cursor-change",{offSet:a}),"json"===i&&0!==a&&(t.jsonPath=Mt(n,a),t.$emit("on-jsonpath-change",{jsonPath:t.jsonPath}))}))},methods:{copyToClipboard:function(){var t=this.$Notice;this.jsonPath?navigator.clipboard.writeText(this.jsonPath).then((function(){}),(function(){t.error({title:"jsonpath copy failed."})})):t.warning({title:"There is no jsonpath that can be copied."})}}},Ft=jt,Lt=Object(h["a"])(Ft,wt,St,!1,null,null,null),Pt=Lt.exports,Bt={components:{ImageEditor:mt,FileViewer:kt,CodeEditor:Pt},created:function(){this.$bus.$on("displayAttach",this.displayAttach)},data:function(){return{isDisplayFile:!1,attachmentName:null,attachmentId:null,attachmentContent:null}},computed:{isImageFile:function(){if(!this.attachmentName)return!1;var t=["png","jpg","jpeg","webp"],e=this.attachmentName.split("."),n=e[e.length-1];return t.indexOf(n)>-1},isSnapshot:function(){return!!this.attachmentContent&&(this.attachmentContent=JSON.stringify(this.attachmentContent,null,2),!0)}},methods:{displayAttach:function(t){this.isDisplayFile=!0,this.attachmentName=t.name,this.attachmentId=t.id,this.attachmentContent=t.eventObj},saveImage:function(){this.$bus.$emit("saveImage"),this.isDisplayFile=!1}}},Rt=Bt,Nt=Object(h["a"])(Rt,ot,st,!1,null,null,null),qt=Nt.exports,Ut=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Row",{staticStyle:{margin:"10px"},attrs:{gutter:16}},[n("i-col",{attrs:{span:"18"}},[n("Button",{attrs:{long:"",type:"primary",loading:t.submitLock},on:{click:t.onSubmit}},[t.submitLock?n("span",[n("b",[t._v("Submitting Issue...")])]):n("span",[n("b",[t._v("Submit")])])])],1),n("i-col",{attrs:{span:"6"}},[n("Tooltip",{attrs:{content:"Save (⌘+s)",placement:"top",delay:500}},[n("Button",{attrs:{long:"",type:"info"},on:{click:t.onSave}},[n("span",[n("b",[t._v("Draft")])])])],1)],1)],1)],1)},Vt=[],zt={methods:{onSubmit:function(){this.$store.dispatch("submit")},onSave:function(){this.$store.dispatch("saveCache")}},computed:{submitLock:function(){return this.$store.state.form.submitLock}}},Kt=zt,Jt=(n("88fe"),Object(h["a"])(Kt,Ut,Vt,!1,null,"2759e5fa",null)),Yt=Jt.exports,Xt={components:{InputFormItem:w,SelectFormItem:T,CompoundTextAreaFormItem:N,AttachmentsList:it,AttachmentModal:qt,Submit:Yt},computed:{fields:function(){return this.$store.state.form.templateDetail},loadTempalte:function(){return this.$store.state.form.loadTemplate}},methods:{getFormComponentByData:function(t,e){return"input"===e.component?"InputFormItem":"select"===e.component?"SelectFormItem":"compoundTextarea"===e.component?(this.$store.state.form.templateDetail[t].extraMsg||this.$set(this.$store.state.form.templateDetail[t],"extraMsg",[]),"CompoundTextAreaFormItem"):"InputFormItem"}}},Ht=Xt,Gt=(n("9705"),Object(h["a"])(Ht,m,v,!1,null,null,null)),Wt=Gt.exports,Zt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"split-right-bar"},[n("p",{staticStyle:{"line-height":"28px","vertical-align":"middle"}},[t._m(0),t.noneDevices?n("span",[n("b",[t._v("N/A - Please connect your phone to your computer using a USB cable")])]):t._e(),t._l(t.devicesInfo,(function(e,a){return n("span",{key:a,staticClass:"device-btn-group"},[n("a",{staticClass:"device-btn",on:{click:function(n){return t.addDevice(e)}}},[n("Tooltip",{attrs:{"max-width":"400",placement:"bottom-end"}},[n("span",["Android"===e.platform?n("Icon",{attrs:{type:"logo-android"}}):n("Icon",{attrs:{type:"logo-apple"}}),t._v("\n            "+t._s(e.info.model)+"\n          ")],1),n("div",{attrs:{slot:"content"},slot:"content"},[n("p",[t._v("Click to add the following info to description")]),n("p",[t._v("-----------------------------------------------------------")]),t._l(e.info,(function(e,a){return n("Row",{key:a,staticStyle:{width:"200px"}},[e?n("i-col",{attrs:{span:"9"}},[t.DeviceInfoAllUpperKey.indexOf(a)>-1?n("b",{staticStyle:{float:"right"}},[t._v(t._s(a.toUpperCase()))]):n("b",{staticStyle:{float:"right"}},[t._v(t._s(a.charAt(0).toUpperCase()+a.slice(1)))])]):t._e(),n("i-col",{attrs:{span:"14",offset:"1"}},[t._v(t._s(e))])],1)}))],2)])],1),n("a",{staticClass:"screenshot-btn",on:{click:function(n){return t.takeScreenshot(e)}}},[n("Tooltip",{attrs:{placement:"bottom-end"}},[n("Icon",{attrs:{type:"md-images"}}),n("div",{attrs:{slot:"content"},slot:"content"},[t._v("Take a screenshot")])],1)],1)])}))],2)])},Qt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticStyle:{"padding-left":"10px","padding-right":"10px"}},[n("b",[t._v("Devices:")])])}],te={created:function(){this.loadDevices(),this.$io.on("devices",this.loadDevices)},data:function(){return{DeviceInfoAllUpperKey:["os","sn","ip"]}},computed:{devicesInfo:function(){return this.$store.state.devicesInfo},noneDevices:function(){return null===this.devicesInfo||0===this.devicesInfo.length}},methods:{addDevice:function(t){var e="Model: "+t.info.model+"\nVersion: "+t.info.os+"\n";t.app&&(e+="App: "+t.app.packageName+"\nApp version: "+t.app.version+"\n",t.app.build&&(e+="BundleID: "+t.app.build+"\n")),this.$bus.$emit("addMessage",{channel:t.platform,message:e})},takeScreenshot:function(t){this.$store.dispatch("takeScreenshot",{platform:t.platform,deviceId:t.id})},loadDevices:function(){this.$store.dispatch("loadDevices")}}},ee=te,ne=(n("9a9c"),Object(h["a"])(ee,Zt,Qt,!1,null,"7e888db2",null)),ae=ne.exports,ie=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"split-right-table"},[n("Split",{attrs:{mode:"vertical"},model:{value:t.detailSplit,callback:function(e){t.detailSplit=e},expression:"detailSplit"}},[n("div",{ref:"eventContainer",staticClass:"demo-split-pane",attrs:{slot:"top"},slot:"top"},[n("EventInspector",{ref:"eventList"})],1),n("div",{staticClass:"demo-split-pane",attrs:{slot:"bottom"},slot:"bottom"},[n("CodeEditor",{staticStyle:{height:"800px"},attrs:{"read-only":"",language:"json"},model:{value:t.eventDetail,callback:function(e){t.eventDetail=e},expression:"eventDetail"}})],1)])],1)},oe=[],se=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Table",{ref:"eventTable",staticClass:"event-table",staticStyle:{height:"100%"},attrs:{size:"small","highlight-row":"",columns:t.columns,data:t.events},on:{"on-filter-change":t.onFilterChange,"on-row-click":t.onRowClick},scopedSlots:t._u([{key:"action",fn:function(e){var a=e.row;return[n("ContextMenuItem",[n("Button",{attrs:{type:"text",shape:"circle",icon:"ios-add-circle-outline"},on:{click:function(e){return t.onAddEvent(a)}}})],1)]}},{key:"timestamp",fn:function(e){var a=e.row;return[n("ContextMenuItem",[n("div",[t._v(t._s(t.ts2String(a.timestamp)))])])]}},{key:"channel",fn:function(t){var e=t.row;return[n("ChannelColumn",{attrs:{channel:e.channel}})]}},{key:"content",fn:function(e){var a=e.row;return[n(t.contentComponentName(a.content),{tag:"component",attrs:{event:t.content2Obj(a.content)}})]}}])}),n("div",{staticClass:"page"},[t.page?n("Page",{attrs:{current:t.page.index+1,total:t.page.count*t.page.size,"page-size":t.page.size},on:{"on-change":t.onPageChange}}):t._e()],1),n("div",{directives:[{name:"show",rawName:"v-show",value:t.isContextMenuShown,expression:"isContextMenuShown"}],staticClass:"row-contextmenu ivu-select-dropdown",style:{left:t.contextMenuLeft,top:t.contextMenuTop}},[n("ul",{staticClass:"ivu-dropdown-menu"},[n("li",{staticClass:"ivu-dropdown-item",on:{click:t.onContextMenuShowNotice}},[t._v("Show notice")]),n("li",{staticClass:"ivu-dropdown-item",on:{click:t.onContextMenuShowAll}},[t._v("Show all")])])])],1)},re=[],ce=(n("386d"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ContextMenuItem",[n("div",[n("span",{staticStyle:{color:"#52c41a","font-weight":"bold","padding-left":"3px","padding-right":"3px"}},[t._v(t._s(t.event.flow.request.method))]),n("span",{staticStyle:{"font-weight":"bold","padding-left":"3px","padding-right":"3px"},style:{color:t.responseCodeColor}},[t._v(t._s(t.event.flow.response.code))]),n("a",{staticStyle:{"font-weight":"bold","padding-left":"3px","padding-right":"3px"},on:{"!click":function(e){return t.openURL.apply(null,arguments)}}},[t._v(t._s(t.event.flow.request.scheme)+"://"+t._s(t.event.flow.request.host)+t._s(t.event.flow.request.path))])]),n("div",[n("span",{staticClass:"property_font"},[t._v("Duration: "+t._s(t.duration))]),n("span",{staticClass:"property_font"},[t._v("Size: "+t._s(t.size))])])])}),le=[],ue=function(t){if(0===t)return"0B";var e=["B","KB","MB","GB","TB","PB"],n=Math.floor(Math.log(t)/Math.log(1024));return(t/Math.pow(1024,Math.floor(n))).toFixed(1)+e[n]},de=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"contextmenu-item",on:{contextmenu:function(e){return e.preventDefault(),t.onContextMenu.apply(null,arguments)}}},[n("div",{staticClass:"contextmenu-item-container"},[t._t("default")],2)])},he=[],pe={methods:{onContextMenu:function(t){this.$bus.$emit("contextmenu.show",t)}}},fe=pe,me=(n("5465"),Object(h["a"])(fe,de,he,!1,null,null,null)),ve=me.exports,ge={props:["event"],components:{ContextMenuItem:ve},computed:{duration:function(){var t=this.event.flow.duration;return t>=1?Math.round(100*t/100)+"s":(1e3*t).toFixed(0)+"ms"},size:function(){var t=this.event.flow.size;return ue(t)},responseCodeColor:function(){return this.event.flow.response.code<=399?"#52c41a":"#ed4014"}},methods:{openURL:function(){"GET"===this.event.flow.request.method&&window.open(this.event.flow.request.url,"_blank")}}},be=ge,xe=(n("27a0"),Object(h["a"])(be,ce,le,!1,null,"09affdc8",null)),ye=xe.exports,ke=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ContextMenuItem",[n("div",{staticClass:"description"},[t._v(t._s(t.eventDescription))])])},we=[],Se={props:["event"],components:{ContextMenuItem:ve},computed:{eventDescription:function(){return this.event.hasOwnProperty("message")?this.event.message:JSON.stringify(this.event)}}},$e=Se,Ie=(n("5811"),Object(h["a"])($e,ke,we,!1,null,"14c96c95",null)),Ce=Ie.exports,_e=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ContextMenuItem",[n("div",{staticClass:"ivu-tag ivu-tag-checked",staticStyle:{"min-width":"60px","text-align":"center"},style:{background:t.bgColor,color:"#ffffff"}},[n("b",[t._v(t._s(t.channel))])])])},Te=[],Me={props:["channel"],components:{ContextMenuItem:ve},computed:{bgColor:function(){return"flow"===this.channel?"#0fccbf":"notice"===this.channel?"#ff9900":"snapshot"===this.channel?"#52A7F9":"#808695"}}},De=Me,Ae=Object(h["a"])(De,_e,Te,!1,null,null,null),Ee=Ae.exports;function Oe(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=je(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var a=0,i=function(){};return{s:i,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,r=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){r=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(r)throw o}}}}function je(t,e){if(t){if("string"===typeof t)return Fe(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fe(t,e):void 0}}function Fe(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var Le={components:{FlowTableItem:ye,CustomTableItem:Ce,ChannelColumn:Ee,ContextMenuItem:ve},created:function(){this.$store.dispatch("loadChannelNames");var t=new URLSearchParams(window.location.search),e=t.get("event_id");this.$store.dispatch("loadEvents",{eventId:e}),this.$bus.$on("contextmenu.show",this.showContextMenu),this.$bus.$on("contextmenu.dismiss",this.dismissContextMenu)},mounted:function(){this.tableRect=this.$refs.eventTable.$el.getBoundingClientRect()},data:function(){return{tableRect:null,isContextMenuShown:!1,contextMenuLeft:0,contextMenuTop:0}},computed:{events:function(){return this.$store.state.event.events},page:function(){return this.$store.state.event.page},channelNames:function(){return this.$store.state.event.channelNames},columns:function(){var t,e=[],n=Oe(this.$store.state.event.channelNames);try{for(n.s();!(t=n.n()).done;){var a=t.value;e.push({label:a,value:a})}}catch(i){n.e(i)}finally{n.f()}return[{title:"",slot:"action",width:35},{title:"Time",key:"timestamp",slot:"timestamp",width:90},{title:"Channel",key:"channel",slot:"channel",width:80,filters:e,filteredValue:this.$store.state.event.channelFilters,filterRemote:function(t){this.$store.dispatch("updateChannelFilters",t)}},{title:"Content",key:"content",slot:"content"}]}},methods:{content2Obj:function(t){return JSON.parse(t)},contentComponentName:function(t){var e=JSON.parse(t);return"flow"===e.channel?"FlowTableItem":"CustomTableItem"},onFilterChange:function(t){console.log("filter change",t)},onRowClick:function(t){this.$store.commit("setSelectedEventId",t.event_id);var e=JSON.stringify(JSON.parse(t.content),null,2);this.$store.commit("setEventDetail",e),this.isContextMenuShown=!1},ts2String:function(t){var e=new Date(1e3*t),n=e.getHours()+":",a=(e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes())+":",i=e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds();return e.getMonth()+1+"-"+e.getDate()+" "+n+a+i},onPageChange:function(t){this.$store.commit("setSelectedEventId",null),this.$store.commit("setEventDetail",""),this.$store.dispatch("loadEvents",{page:t-1})},onAddEvent:function(t){var e=JSON.parse(t.content);e.summary&&this.$bus.$emit("addSummary",e.summary),e.message&&this.$bus.$emit("addMessage",{channel:e.channel,message:e.message,id:e.id,sender:e.sender}),e.snapshot&&this.$bus.$emit("addSnapshot",e),e.attachments&&this.$bus.$emit("addAttachments",e.attachments)},showContextMenu:function(t){var e=this.$refs.eventTable.$el.getBoundingClientRect();this.contextMenuLeft=t.pageX-e.left+"px",this.contextMenuTop=t.pageY-this.tableRect.top+"px",this.isContextMenuShown=!0},dismissContextMenu:function(){this.isContextMenuShown=!1},onContextMenuShowNotice:function(){this.$store.dispatch("showNotice"),this.isContextMenuShown=!1},onContextMenuShowAll:function(){this.$store.dispatch("showAll"),this.isContextMenuShown=!1}}},Pe=Le,Be=(n("28fd"),Object(h["a"])(Pe,se,re,!1,null,null,null)),Re=Be.exports,Ne={components:{EventInspector:Re,CodeEditor:Pt},data:function(){return{detailSplit:.6,scrollRate:0}},created:function(){this.$bus.$on("eventLitScroll",this.setEventContainerScroll)},computed:{eventDetail:{get:function(){return this.$store.state.event.eventDetail},set:function(t){}}},methods:{addDescAttach:function(t){this.channelAddToDesc.indexOf(t.channel)>-1?this.dispatch("addIntoDesc",t.id):this.channelAddToAttach.indexOf(t.channel)>-1&&this.dispatch("addIntoAttach",t.id),this.$Message.error("Add description and attachments have not supported yet!")},timestampToTime:function(t){var e=new Date(1e3*t),n=e.getHours()+":",a=(e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes())+":",i=e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds();return n+a+i},getColunmsFilterItem:function(){return[]},setEventContainerScroll:function(t){var e=this;this.scrollRate=t,setTimeout((function(){var n=e.$refs.eventContainer,a=n.scrollHeight*t;e.$refs.eventContainer.scrollTop=a-n.scrollHeight/20}),1)}}},qe=Ne,Ue=(n("4e6f"),Object(h["a"])(qe,ie,oe,!1,null,"7b55e704",null)),Ve=Ue.exports,ze={components:{BugTemplateSelector:f,BugItForm:Wt,BugitDevices:ae,BugitExtra:Ve},data:function(){return{metaKey:!1,split:.4}},created:function(){this.$bus.$on("message",this.displayMessage),this.$bus.$on("msg.success",this.successMessage),this.$bus.$on("msg.info",this.infoMessage),this.$bus.$on("msg.error",this.errorMessage)},mounted:function(){document.addEventListener("keydown",this.onKeyDown),document.addEventListener("keyup",this.onKeyUp)},methods:{onKeyDown:function(t){"Meta"===t.key?this.metaKey=!0:"s"==t.key&&this.metaKey&&(window.event.preventDefault(),this.$store.dispatch("saveCache"))},onKeyUp:function(t){"Meta"===t.key&&(this.metaKey=!1)},successMessage:function(t){this.$Message.success({content:t,duration:3,closable:!0})},infoMessage:function(t){this.$Message.info({content:t,duration:3,closable:!0})},errorMessage:function(t){this.$Message.error({content:t,duration:0,closable:!0})},displayMessage:function(t){t.hasOwnProperty("code")?1e3===t.code?this.$Message.success({content:t.message,duration:10,closable:!0}):(t.code,this.$Message.error({content:t.message,duration:0,closable:!0})):this.$Message.info({content:t,duration:3,closable:!0})}}},Ke=ze,Je=(n("ccd8"),Object(h["a"])(Ke,s,r,!1,null,"6dc9c3d1",null)),Ye=Je.exports,Xe={name:"app",components:{Bugit:Ye}},He=Xe,Ge=(n("034f"),Object(h["a"])(He,i,o,!1,null,null,null)),We=Ge.exports,Ze=n("2f62"),Qe=n("bc3a"),tn=n.n(Qe),en="/plugins/bugit/api",nn=function(t){var e=en+"/template";return t?tn()({url:e,method:"POST",data:{path:t}}):tn()({url:e})},an=function(){return tn()({url:en+"/device"})},on=function(t){var e="/api/event";return t&&t.hasOwnProperty("channelFilters")&&t.channelFilters.length>0&&(e+="/"+t.channelFilters.join("+")),t&&t.hasOwnProperty("eventId")&&t.eventId?e+="/id/"+t.eventId:t&&t.hasOwnProperty("page")&&t.page&&(e+="/page/"+t.page),tn()({url:e})},sn=function(){return tn()({url:"/api/channel/default"})},rn=function(t,e){return tn()({url:en+"/attachments/"+t,method:"PUT",data:{imageData:e}})},cn=function(t,e,n,a){return tn()({url:en+"/issue",method:"POST",data:{template:t,issue:e,attachments:n,snapshots:a}})},ln=function(t,e){return tn()({url:en+"/take_screenshot/"+t+"/"+e})},un=function(){return tn()({url:en+"/attachments"})},dn=function(t){return tn()({url:en+"/attachments/"+t,method:"DELETE"})},hn=function(t,e){return tn()({url:en+"/cache/"+t,method:"POST",data:e})},pn=new a["default"],fn=n("1c46"),mn=n.n(fn),vn={state:{templates:[],selectedTemplateIndex:null,templateDetail:null,formInfo:null,ruleValidate:null,formValue:{},attachmentsList:[],snapshotList:[],loadAttachmentCount:0,shownFileName:null,submitLock:!1,loadTemplate:!1,shownFileContent:{code:null,type:null,message:null}},mutations:{setFormData:function(t,e){t.templateDetail[e.index].value=e.value},setTemplates:function(t,e){t.templates=e},setSelectedTemplateIndex:function(t,e){t.selectedTemplateIndex=e},setTemplateDetail:function(t,e){t.templateDetail=e},setSubmitLock:function(t,e){t.submitLock=e},setLoadTemplate:function(t,e){t.loadTemplate=e},updateFormInfo:function(t,e){for(var n in t.metadata)t.metadata[n].key===e&&(t.formInfo=t.metadata[n],t.ruleValidate=t.metadata[n].rules)},updateRuleValidate:function(t,e){t.ruleValidate=e},updateFormValue:function(t,e){t.formValue=e},deleteFormValue:function(t,e){t.formValue={}},updateExtraMsg:function(t,e){t.templateDetail[e.index].extraMsg=e.value},addExtraMsg:function(t,e){var n=e.value;t.templateDetail[e.index].extraMsg.push(n)},deleteExtraMsg:function(t,e){t.templateDetail[e.propsIndex].extraMsg.splice(e.index,1)},updateAttachmentsList:function(t,e){t.attachmentsList=e},addAttachmentsList:function(t,e){t.attachmentsList.push(e)},updateShownFileName:function(t,e){t.shownFileName=e},updateShownFileContent:function(t,e){t.shownFileContent=e},deleteAttachment:function(t,e){t.attachmentsList.splice(e,1)},addSnapshot:function(t,e){var n="snapshot_"+e.id;t.snapshotList.push({name:n,eventObj:e})},deleteSnapshot:function(t,e){t.snapshotList.splice(e,1)}},actions:{loadTemplateList:function(t){var e=t.commit,n=t.dispatch;nn().then((function(t){1e3===t.data.code?(e("setSelectedTemplateIndex",t.data.selected_index),e("setTemplates",t.data.templates),n("loadTemplate")):pn.$emit("msg.error",t.data.message)}))},loadTemplate:function(t){var e=t.state,n=t.commit;if(null!==e.selectedTemplateIndex){var a=e.templates[e.selectedTemplateIndex].path;n("setTemplateDetail",[]),n("setLoadTemplate",!0),nn(a).then((function(t){n("setTemplateDetail",t.data),n("setLoadTemplate",!1)})).catch((function(t){pn.$emit("message",t.data),n("setLoadTemplate",!1)}))}},updateSelectedTemplateIndex:function(t,e){var n=t.commit,a=t.dispatch;n("setSelectedTemplateIndex",e),a("loadTemplate")},setExtraMsgUpward:function(t,e){var n=t.state,a=t.commit,i=n.templateDetail[e.propsIndex].extraMsg,o=e.index,s=i[o];i.splice(o,1);for(var r=[],c=0;c<i.length;c++)c===o-1&&r.push(s),r.push(i[c]);a("updateExtraMsg",{index:e.propsIndex,value:r})},saveEditedImage:function(t,e){t.state,t.commit;var n=e.id,a=e.imageData;rn(n,a)},submit:function(t){var e=t.state,n=t.commit;pn.$emit("message","Submitting issue ..."),n("setSubmitLock",!0),cn(e.templates[e.selectedTemplateIndex],e.templateDetail,e.attachmentsList,e.snapshotList).then((function(t){pn.$emit("message",t.data),n("setSubmitLock",!1)})).catch((function(t){pn.$emit("message",t.data),n("setSubmitLock",!1)}))},loadAttachment:function(t){var e=t.state,n=t.commit;un().then((function(t){if(n("updateAttachmentsList",t.data),e.attachmentsList.length>0&&e.loadAttachmentCount>0){var a=e.attachmentsList.length-1;pn.$emit("displayAttach",e.attachmentsList[a])}e.loadAttachmentCount+=1}))},removeAttachment:function(t,e){var n=t.commit;n("deleteAttachment",e.index),dn(e.id)},saveCache:function(t){var e=t.state;if(null!==e.selectedTemplateIndex){var n=e.templates[e.selectedTemplateIndex],a=mn.a.createHash("md5");a.update(n.path);var i=a.digest("hex");hn(i,e.templateDetail).then((function(t){1e3===t.data.code?pn.$emit("msg.success","Save as draft, success"):pn.$emit("msg.error","Save draft failed: "+t.message)})).catch((function(t){pn.$emit("msg.error","Can't save as draft"),console.error("Can't save as draft",t)}))}}}};function gn(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=bn(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var a=0,i=function(){};return{s:i,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,r=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){r=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(r)throw o}}}}function bn(t,e){if(t){if("string"===typeof t)return xn(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xn(t,e):void 0}}function xn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var yn={state:{channelNames:[],channelFilters:["flow","notice","snapshot"],events:[],selectedEventId:null,eventDetail:"",page:null},mutations:{setChannelNames:function(t,e){t.channelNames=e},setChannelFilters:function(t,e){t.channelFilters=e},setEvents:function(t,e){t.events=e},setSelectedEventId:function(t,e){t.selectedEventId=e},setEventDetail:function(t,e){t.eventDetail=e},setPage:function(t,e){t.page=e}},actions:{loadChannelNames:function(t){var e=t.commit;sn().then((function(t){1e3===t.data.code&&e("setChannelNames",t.data.data)}))},loadEvents:function(t){var e=t.state,n=t.commit,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=null;a.eventId?i=a.eventId:e.selectedEventId&&(i=e.selectedEventId),on({channelFilters:e.channelFilters,eventId:i,page:a.page}).then((function(t){if(1e3===t.data.code){var e=t.data.events;if(i){var a,o=1,s=gn(e);try{for(s.s();!(a=s.n()).done;){var r=a.value;if(r.event_id===i){r._highlight=!0;var c=JSON.stringify(JSON.parse(r.content),null,2);n("setEventDetail",c),n("setSelectedEventId",r.event_id),pn.$emit("eventLitScroll",o/e.length);break}o++}}catch(l){s.e(l)}finally{s.f()}}n("setEvents",e),n("setPage",{index:t.data.page,count:t.data.page_count,size:t.data.page_size})}}))},updateChannelFilters:function(t,e){var n=t.commit,a=t.dispatch;n("setChannelFilters",e),a("loadEvents")},showNotice:function(t){var e=t.dispatch;e("updateChannelFilters",["notice"])},showAll:function(t){var e=t.dispatch;sn().then((function(t){1e3===t.data.code&&e("updateChannelFilters",t.data.data)}))}}},kn={state:{},actions:{takeScreenshot:function(t,e){ln(e.platform,e.deviceId).then((function(t){console.log("Take screenshot",t),pn.$emit("message",t.data)}))}}};a["default"].use(Ze["a"]);var wn=new Ze["a"].Store({modules:{form:vn,event:yn,device:kn},state:{devicesInfo:null},mutations:{updateDevicesInfo:function(t,e){t.devicesInfo=e}},actions:{loadDevices:function(t){var e=t.commit;an().then((function(t){e("updateDevicesInfo",t.data)}))}}}),Sn=n("f825"),$n=n.n(Sn),In=(n("f8ce"),n("3250")),Cn=n.n(In),_n=n("8055"),Tn=n.n(_n);a["default"].config.productionTip=!1,a["default"].use($n.a,{locale:Cn.a}),a["default"].use($n.a),a["default"].prototype["$io"]=Tn()(),a["default"].prototype.$bus=pn,new a["default"]({store:wn,render:function(t){return t(We)}}).$mount("#app")},5811:function(t,e,n){"use strict";n("41ac")},6:function(t,e){},"64a9":function(t,e,n){},"6c38":function(t,e,n){},"6e42":function(t,e,n){},7:function(t,e){},8:function(t,e){},"88fe":function(t,e,n){"use strict";n("6c38")},9:function(t,e){},9705:function(t,e,n){"use strict";n("af43")},"978e":function(t,e,n){},"9a9c":function(t,e,n){"use strict";n("bdbd")},adbe:function(t,e,n){"use strict";n("2199")},af43:function(t,e,n){},bdbd:function(t,e,n){},ccd8:function(t,e,n){"use strict";n("978e")},d2c7:function(t,e,n){},d359:function(t,e,n){"use strict";n("0be9")},eac7:function(t,e,n){}});